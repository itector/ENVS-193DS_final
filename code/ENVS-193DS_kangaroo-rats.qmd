---
title: "ENVS-193DS_kangaroo-rats"
format: 
  html:
    toc: true
    toc-location: left
    code-fold: true
    theme: yeti
editor: visual
execute: 
  message: false
  warning: false
editor: visual
---

# Kangaroo Rats

# Introduction

# Methods

```{r}
# should haves
library(MASS) 
library(lme4)
library(glmmTMB)
library(tidyverse)
library(DHARMa)
library(lmtest)
library(here)
library(janitor)
library(dplyr)
library(ggeffects)
library(performance)
library(naniar)
library(flextable)
library(car)
library(broom)
library(corrplot)
library(AICcmodavg)
library(GGally)
# would be nice to have
library(MuMIn)
#library(equatiomatic)
library(corrplot)
```

```{r load-in-data}
kangaroo_rats <- read_csv(here("data", "dat_for_prob1.csv")) %>% 
  # make the column names cleaner
  clean_names()
```

```{r}
ggplot(kangaroo_rats, aes(x = seeds)) +
  geom_histogram(bins = 10)
```

```{r}
gg_miss_var(kangaroo_rats)
```

```{r}
skim(kangaroo_rats)
```

```{r}
kangaroo_rats %>% 
  select(!species) %>% 
  ggpairs()
```

Build Models

```{r}
# linear model, we know this is wrong
kangaroo1 <- lm(mnd ~ species + seeds + loc + dir, data = kangaroo_rats)

# generalized linear model with Poisson distribution
kangaroo2 <- glm(mnd ~ species + seeds + loc + dir, data = kangaroo_rats, family = "poisson")
kangaroo2.a <- glm(mnd ~ species + seeds + loc + dir, data = kangaroo_rats, family = "poisson")

# generalized linear model with negative binomial distribution
kangaroo3 <- glm.nb(mnd ~ species + seeds + loc + dir, data = kangaroo_rats)
kangaroo3.a <- glmmTMB(mnd ~ species + seeds + loc + dir, data = kangaroo_rats, family = "nbinom2")

# generalized linear model with Poisson distribution and random effect of site
kangaroo4 <- glmer(mnd ~ species + seeds + dir + (1|loc), data = kangaroo_rats, family = "poisson")
kangaroo4.a <- glmmTMB(mnd ~ species + seeds + dir + (1|loc), data = kangaroo_rats, family = "poisson")

# generalized linear model with negative binomial distribution and random effect of site
kangaroo5 <- glmer.nb(mnd ~ species + seeds + dir + (1|loc), data = kangaroo_rats)
kangaroo5.a <- glmmTMB(mnd ~ species + seeds + dir + (1|loc), data = kangaroo_rats, family = "nbinom2")
```

```{r}
# check diagnostics
plot(simulateResiduals(kangaroo1)) # bad

plot(simulateResiduals(kangaroo2)) # bad

plot(simulateResiduals(kangaroo3)) # ok?

plot(simulateResiduals(kangaroo4)) # bad

plot(simulateResiduals(kangaroo5)) # bad/ok?
```

# Results

these are the results portion

# Works Cited

this is the works cited portion for what we refe
